<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iman Fernando</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Audio element for music playback -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <nav>
        <div class="nav-container">
            <div class="logo">IMAN FERNANDO</div>
            <ul class="nav-links" id="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#music">Music</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#tour">Live</a></li>
                <li><a href="#collaborations">Collaborations</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="mobile-menu" onclick="toggleMenu()">
                <div class="menu-bar"></div>
                <div class="menu-bar"></div>
                <div class="menu-bar"></div>
            </div>
        </div>
    </nav>

    <section id="home" class="hero">
        <video autoplay muted loop id="heroVideo" class="hero-background-video">
            <source src="images/Vids/backvid.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div class="hero-content">
            <h1>IMAN</h1>
            <p>Singer • Artist • Performer</p>
            <div class="hero-play-container">
                <button class="hero-play-btn" id="heroPlayBtn" onclick="toggleHeroPlayback()">
                    <svg viewBox="0 0 24 24" id="heroPlayIcon">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg viewBox="0 0 24 24" id="heroPauseIcon" style="display: none;">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                    </svg>
                </button>
                <div class="hero-track-info" id="heroTrackInfo">
                    <div class="hero-track-title" id="heroTrackTitle">Midnight Dreams</div>
                    <div class="hero-track-artist">Iman Fernando</div>
                </div>
            </div>
        </div>
        <div class="scroll-indicator"></div>
    </section>

    <section id="about" class="flagship-showcase">
        <div class="showcase-container">
            <div class="showcase-content">
                <div class="showcase-text">
                    <h2>ABOUT</h2>
                    <p>
                        Iman Fernando is a passionate singer and artist whose soulful voice captivates audiences across genres. With a unique blend of contemporary and traditional influences, Iman creates music that resonates with the heart and soul.
                    </p>
                    <p>
                        Born with an innate love for music, Iman has been performing since childhood, developing a distinctive style that combines powerful vocals with emotional depth. Each performance is a journey that connects with listeners on a profound level.
                    </p>
                    <p>
                        From intimate acoustic sessions to dynamic live performances, Iman continues to push creative boundaries while staying true to authentic expression.
                    </p>
                </div>
                <div class="showcase-image">
                    <div class="product-frame">
                        <img src="images/Iman.jpeg" alt="Iman Fernando" />
                        <div class="image-overlay"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="music" class="section">
        <div class="container">
            <h2 class="section-title fade-in">Music</h2>
            <div class="music-grid">
                <div class="track fade-in">
                    <div class="track-image">
                        <img src="images/album_arts/Hathpethi_Mal.jpg" alt="Hathpethi Mal" class="album-art">
                        <button class="track-play-btn" onclick="playTrack('Hathpethi_Mal', 'Hathpethi Mal', '♪')">▶</button>
                    </div>
                    <div class="track-info">
                        <h3 class="track-title">Hathpethi Mal <br>(හත්පෙති මල්)</h3>
                        <div class="track-meta">Single • 2025</div>
                        <div class="track-links">
                            <a href="https://open.spotify.com/track/6CAfdG501h4wxV3bjyZTfY" class="track-link" target="_blank">Spotify</a>
                            <a href="https://music.apple.com/us/album/hathpethi-mal-single/1807812309" class="track-link" target="_blank">Apple Music</a>
                            <a href="https://www.youtube.com/watch?v=Tw6D2YrVoFU" class="track-link" target="_blank">YouTube</a>
                        </div>
                    </div>
                </div>

                <div class="track fade-in">
                    <div class="track-image">
                        <img src="images/album_arts/Paalu_Yaame.jpeg" alt="Paalu Yaame" class="album-art">
                        <button class="track-play-btn" onclick="playTrack('Paalu_Yaame', 'Paalu Yaame', '☀')">▶</button>
                    </div>
                    <div class="track-info">
                        <h3 class="track-title">Paalu Yaame <br> (මා සොඳුරිය​)</h3>
                        <div class="track-meta">Single • 2023</div>
                        <div class="track-links">
                            <a href="https://open.spotify.com/track/42e6q2wCvs3awgT5bHPlZz" class="track-link" target="_blank">Spotify</a>
                            <a href="https://music.apple.com/us/album/paalu-yaame/1718026818" class="track-link" target="_blank">Apple Music</a>
                            <a href="https://www.youtube.com/watch?v=xaFss3mI_8s" class="track-link" target="_blank">YouTube</a>
                        </div>
                    </div>
                </div>

                <div class="track fade-in">
                    <div class="track-image">
                        <img src="images/album_arts/Hangannada_Adare.jpeg" alt="Hangannada Adare" class="album-art">
                        <button class="track-play-btn" onclick="playTrack('Hangannada_Adare', 'Hangannada Adare', '∿')">▶</button>
                    </div>
                    <div class="track-info">
                        <h3 class="track-title">Hangannada Adare <br>(හංගන්නද ආදරේ)</h3>
                        <div class="track-meta">Single • 2023</div>
                        <div class="track-links">
                            <a href="https://open.spotify.com/track/3sBKpC9WBlvmHbvU4Ky9id" class="track-link" target="_blank">Spotify</a>
                            <a href="https://music.apple.com/lk/song/hangannada-adare-feat-dilu-beats/1717062048" class="track-link" target="_blank">Apple Music</a>
                            <a href="https://www.youtube.com/watch?v=pNJna39-_nI" class="track-link" target="_blank">YouTube</a>
                        </div>
                    </div>
                </div>

                <div class="track fade-in">
                    <div class="track-image">
                        <img src="images/album_arts/Ralu_Nethu.jpg" alt="Ralu Nethu" class="album-art">
                        <button class="track-play-btn" onclick="playTrack('Ralu_Nethu', 'Ralu Nethu', '◆')">▶</button>
                    </div>
                    <div class="track-info">
                        <h3 class="track-title">Ralu Nethu <br>(රළු නෙතු)</h3>
                        <div class="track-meta">Single • 2024</div>
                        <div class="track-links">
                            <a href="https://open.spotify.com/track/7sC2mzzW6ikgeM71PlY4Rq" class="track-link" target="_blank">Spotify</a>
                            <a href="https://music.apple.com/lk/album/ralu-nethu-single/1758223075" class="track-link" target="_blank">Apple Music</a>
                            <a href="https://www.youtube.com/watch?v=vAUuhZ5ffzA" class="track-link" target="_blank">YouTube</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="collaborations" class="section">
        <div class="container">
            <h2 class="section-title fade-in">Collaborations</h2>
            <div class="music-grid">
                <div class="track fade-in">
                    <div class="track-image">
                        <img src="images/album_arts/Charikawak.jpg" alt="Charikawak" class="album-art">
                        <button class="track-play-btn" onclick="playTrack('Chaarikawak', 'Charikawak', '◦')">▶</button>
                    </div>
                    <div class="track-info">
                        <h3 class="track-title">Charikawak <br>(චාරිකාවක්)</h3>
                        <div class="track-meta">Single • 2024</div>
                        <div class="track-links">
                            <a href="https://open.spotify.com/track/1dZ6SOdN5YXka5F3M9LZKU" class="track-link" target="_blank">Spotify</a>
                            <a href="https://music.apple.com/lk/song/charikawak-feat-ramidu-iman-fernando/1753219825" class="track-link" target="_blank">Apple Music</a>
                            <a href="https://www.youtube.com/watch?v=qwQdMXqy9wM" class="track-link" target="_blank">YouTube</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="tour" class="section">
        <div class="container">
            <h2 class="section-title fade-in">Live Shows</h2>
            <div class="tour-list fade-in">
                <div class="tour-item">
                    <div>
                        <div class="tour-date">Nov 15, 2025</div>
                        <div class="tour-venue">Aaley</div>
                        <div class="tour-location">Kandy, Sri Lanka</div>
                    </div>
                    <a href="https://mytickets.lk" class="tour-button" target="_blank">Tickets</a>
                </div>

                <div class="tour-item">
                    <div>
                        <div class="tour-date">Nov 22, 2025</div>
                        <div class="tour-venue">Kathawak</div>
                        <div class="tour-location">Colombo, Sri Lanka</div>
                    </div>
                    <a href="https://mytickets.lk" class="tour-button" target="_blank">Tickets</a>
                </div>

                <div class="tour-item">
                    <div>
                        <div class="tour-date">Nov 05, 2025</div>
                        <div class="tour-venue">Nadhagama 2.0</div>
                        <div class="tour-location">Galle, Sri Lanka</div>
                    </div>
                    <a href="https://mytickets.lk" class="tour-button" target="_blank">Tickets</a>
                </div>

                <div class="tour-item">
                    <div>
                        <div class="tour-date">Dec 18, 2025</div>
                        <div class="tour-venue">Nadhagama 2.0</div>
                        <div class="tour-location">Viharamahadevi Open Air, Sri Lanka</div>
                    </div>
                    <a href="https://mytickets.lk" class="tour-button" target="_blank">Tickets</a>
                </div>

                <div class="tour-item">
                    <div>
                        <div class="tour-date">Dec 02, 2025</div>
                        <div class="tour-venue">Kathawak Return</div>
                        <div class="tour-location">Kandy, Sri Lanka</div>
                    </div>
                    <a href="https://mytickets.lk" class="tour-button" target="_blank">Tickets</a>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section contact">
        <div class="container">
            <h2 class="section-title fade-in">Connect</h2>
            <div class="social-links fade-in">
                <a href="https://www.instagram.com/imanfernando__?utm_source=chatgpt.com" class="social-link">Instagram</a>
                <a href="https://www.youtube.com/channel/UC3BkKRxd3Xorm6i9Wv1THlQ?utm_source=chatgpt.com" class="social-link">YouTube</a>
                <a href="https://open.spotify.com/artist/42ATja5N0WYsh9RNSParhI?utm_source=chatgpt.com" class="social-link">Spotify</a>
                <a href="https://m.facebook.com/p/Iman-Fernando-100076064232713?utm_source=chatgpt.com" class="social-link">Facebook</a>
                <a href="mailto:imanfernandoofficial@gmail.com" class="social-link">Email</a>
            </div>
        </div>
    </section>

    <!-- Global Music Player -->
    <div class="global-player" id="globalPlayer">
        <div class="player-content">
            <div class="player-info">
                <div class="player-thumbnail" id="playerThumbnail">
                    <svg class="music-icon" viewBox="0 0 24 24">
                        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                    </svg>
                </div>
                <div class="player-text">
                    <div class="player-title" id="playerTitle">Select a track</div>
                    <div class="player-artist" id="playerArtist">Iman Fernando</div>
                </div>
            </div>
            <div class="player-controls">
                <button class="control-btn" id="prevBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                    </svg>
                </button>
                <button class="control-btn play-btn" id="playPauseBtn">
                    <svg viewBox="0 0 24 24" id="playIcon">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg viewBox="0 0 24 24" id="pauseIcon" style="display: none;">
                        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                    </svg>
                </button>
                <button class="control-btn" id="nextBtn">
                    <svg viewBox="0 0 24 24">
                        <path d="m6 18 8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                    </svg>
                </button>
                <button class="control-btn" id="volumeBtn">
                    <svg viewBox="0 0 24 24" id="volumeOnIcon">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <svg viewBox="0 0 24 24" id="volumeOffIcon" style="display: none;">
                        <path d="M16.5 12A4.5 4.5 0 0014 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0021 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                    </svg>
                </button>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">0:00</span>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                © 2024 Iman Fernando. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Music Player Elements
        const audioPlayer = document.getElementById('audioPlayer');
        const globalPlayer = document.getElementById('globalPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const playIcon = document.getElementById('playIcon');
        const pauseIcon = document.getElementById('pauseIcon');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeSpan = document.getElementById('currentTime');
        const totalTimeSpan = document.getElementById('totalTime');
        const playerTitle = document.getElementById('playerTitle');
        const playerArtist = document.getElementById('playerArtist');
        const playerThumbnail = document.getElementById('playerThumbnail');
        const heroPlayBtn = document.getElementById('heroPlayBtn');
        const heroTrackInfo = document.getElementById('heroTrackInfo');
        const heroTrackTitle = document.getElementById('heroTrackTitle');
        const volumeBtn = document.getElementById('volumeBtn');
        const volumeOnIcon = document.getElementById('volumeOnIcon');
        const volumeOffIcon = document.getElementById('volumeOffIcon');

        // Track data with actual MP3 file names
        const tracks = {
            'Hathpethi_Mal': {
                src: 'music/Hathpethi Mal.mp3',
                title: 'Hathpethi Mal',
                artist: 'Iman Fernando',
                symbol: '♪',
                image: 'images/album_arts/Hathpethi_Mal.jpg'
            },
            'Paalu_Yaame': {
                src: 'music/Paalu_yaame.mp3',
                title: 'Paalu Yaame',
                artist: 'Iman Fernando',
                symbol: '☀',
                image: 'images/album_arts/Paalu_Yaame.jpeg'
            },
            'Hangannada_Adare': {
                src: 'music/Hangannada_adare.mp3',
                title: 'Hangannada Adare',
                artist: 'Iman Fernando',
                symbol: '∿',
                image: 'images/album_arts/Hangannada_Adare.jpeg'
            },
            'Ralu_Nethu': {
                src: 'music/Ralu_nethu.mp3',
                title: 'Ralu Nethu',
                artist: 'Iman Fernando',
                symbol: '◆',
                image: 'images/album_arts/Ralu_Nethu.jpg'
            },
            'Chaarikawak': {
                src: 'music/Charikawak.mp3',
                title: 'Charikawak',
                artist: 'Iman Fernando',
                symbol: '◦',
                image: 'images/album_arts/Charikawak.jpg'
            },
        };

        let currentTrack = 'Hathpethi_Mal';
        let isPlaying = false;
        let currentTrackIndex = 0;
        const trackKeys = Object.keys(tracks);
        let demoProgress = 0;
        let demoInterval = null;
        let demoDuration = 222;
        let isInitialized = false;

        // Initialize default track
        function initializePlayer() {
            const track = tracks[currentTrack];
            audioPlayer.src = track.src;
            if (playerTitle) playerTitle.textContent = track.title;
            if (playerArtist) playerArtist.textContent = track.artist;
            if (playerThumbnail) {
                playerThumbnail.innerHTML = `<img src="${track.image}" alt="${track.title}" class="player-art">`;
            }
            if (heroTrackTitle) heroTrackTitle.textContent = track.title;
            if (heroTrackInfo) heroTrackInfo.classList.add('visible');
        }

        // Toggle hero playback
        function toggleHeroPlayback() {
            const heroPlayIcon = document.getElementById('heroPlayIcon');
            const heroPauseIcon = document.getElementById('heroPauseIcon');
            
            if (!isPlaying) {
                playCurrentTrack();
                if (heroPlayIcon) heroPlayIcon.style.display = 'none';
                if (heroPauseIcon) heroPauseIcon.style.display = 'block';
            } else {
                pauseCurrentTrack();
                if (heroPlayIcon) heroPlayIcon.style.display = 'block';
                if (heroPauseIcon) heroPauseIcon.style.display = 'none';
            }
        }

        function playCurrentTrack() {
            // Clear any existing demo interval first
            clearDemoInterval();
            
            audioPlayer.play().then(() => {
                isPlaying = true;
                updatePlayPauseButtons();
                if (globalPlayer) globalPlayer.classList.add('active');
                if (heroPlayBtn) heroPlayBtn.classList.add('playing');
                updateAllTrackButtons();
            }).catch(error => {
                console.log('Audio play failed, using demo mode:', error);
                // Fallback for demo mode
                isPlaying = true;
                updatePlayPauseButtons();
                if (globalPlayer) globalPlayer.classList.add('active');
                if (heroPlayBtn) heroPlayBtn.classList.add('playing');
                simulateProgress();
                updateAllTrackButtons();
            });
        }

        function pauseCurrentTrack() {
            clearDemoInterval();
            audioPlayer.pause();
            isPlaying = false;
            updatePlayPauseButtons();
            if (heroPlayBtn) heroPlayBtn.classList.remove('playing');
            updateAllTrackButtons();
        }

        function clearDemoInterval() {
            if (demoInterval) {
                clearInterval(demoInterval);
                demoInterval = null;
            }
        }

        // Update play/pause button states
        function updatePlayPauseButtons() {
            const heroPlayIcon = document.getElementById('heroPlayIcon');
            const heroPauseIcon = document.getElementById('heroPauseIcon');
            
            if (isPlaying) {
                if (playIcon) playIcon.style.display = 'none';
                if (pauseIcon) pauseIcon.style.display = 'block';
                if (heroPlayIcon) heroPlayIcon.style.display = 'none';
                if (heroPauseIcon) heroPauseIcon.style.display = 'block';
            } else {
                if (playIcon) playIcon.style.display = 'block';
                if (pauseIcon) pauseIcon.style.display = 'none';
                if (heroPlayIcon) heroPlayIcon.style.display = 'block';
                if (heroPauseIcon) heroPauseIcon.style.display = 'none';
            }
        }

        // Update all track play buttons
        function updateAllTrackButtons() {
            const trackPlayBtns = document.querySelectorAll('.track-play-btn');
            trackPlayBtns.forEach((btn, index) => {
                const trackId = trackKeys[index];
                if (trackId === currentTrack && isPlaying) {
                    btn.innerHTML = '⏸';
                } else {
                    btn.innerHTML = '▶';
                }
            });
        }

        function playTrack(trackId, title, symbol) {
            const track = tracks[trackId];
            if (!track) return;
            
            // Stop current track if playing
            if (isPlaying) {
                pauseCurrentTrack();
            }
            
            // Clear intervals and reset progress
            clearDemoInterval();
            resetProgress();
            
            currentTrack = trackId;
            currentTrackIndex = trackKeys.indexOf(trackId);
            audioPlayer.src = track.src;
            
            // Update player info
            if (playerTitle) playerTitle.textContent = track.title;
            if (playerArtist) playerArtist.textContent = track.artist;
            if (playerThumbnail) {
                playerThumbnail.innerHTML = `<img src="${track.image}" alt="${track.title}" class="player-art">`;
            }
            if (heroTrackTitle) heroTrackTitle.textContent = track.title;
            
            if (globalPlayer) globalPlayer.classList.add('active');
            if (heroTrackInfo) heroTrackInfo.classList.add('visible');
            
            // Small delay to ensure clean state
            setTimeout(() => {
                playCurrentTrack();
            }, 100);
        }

        function resetProgress() {
            demoProgress = 0;
            if (progressFill) progressFill.style.width = '0%';
            if (currentTimeSpan) currentTimeSpan.textContent = '0:00';
            if (totalTimeSpan) totalTimeSpan.textContent = '0:00';
        }

        // Play/Pause toggle for global player
        function togglePlayPause() {
            if (!isPlaying) {
                playCurrentTrack();
            } else {
                pauseCurrentTrack();
            }
        }

        // Format time display
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Update progress bar for real audio
        function updateProgress() {
            if (audioPlayer.duration && !isNaN(audioPlayer.duration)) {
                const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                if (progressFill) progressFill.style.width = progress + '%';
                if (currentTimeSpan) currentTimeSpan.textContent = formatTime(audioPlayer.currentTime);
                if (totalTimeSpan) totalTimeSpan.textContent = formatTime(audioPlayer.duration);
            }
        }

        function simulateProgress() {
            clearDemoInterval();
            
            // Reset and set random duration
            demoProgress = 0;
            demoDuration = Math.floor(Math.random() * 120) + 180; // 3-5 minutes
            
            if (totalTimeSpan) totalTimeSpan.textContent = formatTime(demoDuration);
            if (currentTimeSpan) currentTimeSpan.textContent = '0:00';
            if (progressFill) progressFill.style.width = '0%';
            
            demoInterval = setInterval(() => {
                if (isPlaying) {
                    demoProgress += 1;
                    const progress = (demoProgress / demoDuration) * 100;
                    if (progressFill) progressFill.style.width = Math.min(progress, 100) + '%';
                    if (currentTimeSpan) currentTimeSpan.textContent = formatTime(demoProgress);
                    
                    if (demoProgress >= demoDuration) {
                        clearDemoInterval();
                        isPlaying = false;
                        updatePlayPauseButtons();
                        updateAllTrackButtons();
                        if (heroPlayBtn) heroPlayBtn.classList.remove('playing');
                        
                        // Auto-play next track
                        setTimeout(() => {
                            const nextBtn = document.getElementById('nextBtn');
                            if (nextBtn) nextBtn.click();
                        }, 1000);
                    }
                }
            }, 1000);
        }

        // Mobile menu toggle
        function toggleMenu() {
            const navLinks = document.getElementById('nav-links');
            if (navLinks) {
                navLinks.classList.toggle('active');
            }
        }

        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            if (isInitialized) return;
            isInitialized = true;
            
            initializePlayer();
            
            // Event listeners - only add once
            if (playPauseBtn) playPauseBtn.addEventListener('click', togglePlayPause);
            
            // Progress bar click handler
            if (progressBar) {
                progressBar.addEventListener('click', (e) => {
                    const rect = progressBar.getBoundingClientRect();
                    const percent = (e.clientX - rect.left) / rect.width;
                    
                    if (audioPlayer.duration && !isNaN(audioPlayer.duration)) {
                        audioPlayer.currentTime = percent * audioPlayer.duration;
                    } else {
                        // Demo mode seeking
                        demoProgress = percent * demoDuration;
                        const progress = (demoProgress / demoDuration) * 100;
                        if (progressFill) progressFill.style.width = progress + '%';
                        if (currentTimeSpan) currentTimeSpan.textContent = formatTime(demoProgress);
                    }
                });
            }

            // Audio event listeners
            audioPlayer.addEventListener('timeupdate', updateProgress);
            audioPlayer.addEventListener('loadedmetadata', updateProgress);
            audioPlayer.addEventListener('ended', () => {
                clearDemoInterval();
                isPlaying = false;
                updatePlayPauseButtons();
                updateAllTrackButtons();
                if (heroPlayBtn) heroPlayBtn.classList.remove('playing');
                
                setTimeout(() => {
                    const nextBtn = document.getElementById('nextBtn');
                    if (nextBtn) nextBtn.click();
                }, 1000);
            });

            // Track navigation
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    currentTrackIndex = currentTrackIndex > 0 ? currentTrackIndex - 1 : trackKeys.length - 1;
                    const prevTrackId = trackKeys[currentTrackIndex];
                    const prevTrack = tracks[prevTrackId];
                    playTrack(prevTrackId, prevTrack.title, prevTrack.symbol);
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    currentTrackIndex = currentTrackIndex < trackKeys.length - 1 ? currentTrackIndex + 1 : 0;
                    const nextTrackId = trackKeys[currentTrackIndex];
                    const nextTrack = tracks[nextTrackId];
                    playTrack(nextTrackId, nextTrack.title, nextTrack.symbol);
                });
            }

            // Volume control
            if (volumeBtn) {
                volumeBtn.addEventListener('click', () => {
                    audioPlayer.muted = !audioPlayer.muted;
                    if (audioPlayer.muted) {
                        if (volumeOnIcon) volumeOnIcon.style.display = 'none';
                        if (volumeOffIcon) volumeOffIcon.style.display = 'block';
                    } else {
                        if (volumeOnIcon) volumeOnIcon.style.display = 'block';
                        if (volumeOffIcon) volumeOffIcon.style.display = 'none';
                    }
                });
            }

            // Track buttons
            const trackButtons = document.querySelectorAll('.track-play-btn');
            trackButtons.forEach((button, index) => {
                const trackId = trackKeys[index];
                if (trackId && tracks[trackId]) {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        if (currentTrack === trackId && isPlaying) {
                            pauseCurrentTrack();
                        } else {
                            const track = tracks[trackId];
                            playTrack(trackId, track.title, track.symbol);
                        }
                    });
                }
            });

            // Auto-show global player
            setTimeout(() => {
                if (globalPlayer) {
                    globalPlayer.style.transform = 'translateY(0)';
                }
            }, 2000);
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    const navLinks = document.getElementById('nav-links');
                    if (navLinks) {
                        navLinks.classList.remove('active');
                    }
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Scroll indicator
        window.addEventListener('scroll', () => {
            const scrollIndicator = document.querySelector('.scroll-indicator');
            if (scrollIndicator) {
                if (window.scrollY > 100) {
                    scrollIndicator.style.opacity = '0';
                } else {
                    scrollIndicator.style.opacity = '1';
                }
            }
        });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const navLinks = document.getElementById('nav-links');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            if (navLinks && mobileMenu && 
                !navLinks.contains(event.target) && 
                !mobileMenu.contains(event.target)) {
                navLinks.classList.remove('active');
            }
        });

        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName.toLowerCase() === 'input' || e.target.tagName.toLowerCase() === 'textarea') {
                return;
            }
            
            switch(e.key) {
                case ' ':
                    e.preventDefault();
                    togglePlayPause();
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    const prevBtn = document.getElementById('prevBtn');
                    if (prevBtn) prevBtn.click();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    const nextBtn = document.getElementById('nextBtn');
                    if (nextBtn) nextBtn.click();
                    break;
                case 'm':
                case 'M':
                    e.preventDefault();
                    if (volumeBtn) volumeBtn.click();
                    break;
            }
        });

        // Error handling
        audioPlayer.addEventListener('error', function(e) {
            console.log('Audio loading error, continuing with demo mode:', e);
        });

        // Video/audio coordination
        const heroVideo = document.getElementById('heroVideo');
        if (heroVideo) {
            audioPlayer.addEventListener('play', () => {
                heroVideo.muted = true;
            });
        }
    </script>
</body>
</html>